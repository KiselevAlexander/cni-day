"use strict";jQuery(function(t){var e;e="sub",console.log("test 2 "+e);var a,n,r,i,o,s=(n="/local/templates/2018/sendform.php ",r=8==(a=(/MSIE (\d+)\./.exec(navigator.userAgent)||[0,0])[1])||9==a&&"file:"!=location.protocol?function(e,a){var n=new XDomainRequest,r=t.Deferred();return n.open(a.type,e),n.onload=function(){r.resolve(this.responseText)},n.onerror=function(){r.reject()},n.send(a.data),r}:(t.support.cors=!0,t.ajax),i=function(t,e){return t="__"+t+"__",e.length?(this[t]=e[0],this):this[t]},(o=function(t){t=t||{},this.__email__=t.email||"",this.__title__=t.title||"",this.__data__=t.data||[]}).prototype.email=function(t){return i.call(this,"email",arguments)},o.prototype.title=function(t){return i.call(this,"title",arguments)},o.prototype.data=function(t){return i.call(this,"data",arguments)},o.prototype.send=function(e,a){var i,o,s,l=(i=t.Deferred(),o=this,s=["email","title","data","send"],t.each(s,function(t,e){i[e]=function(){return o[e].apply(o,arguments)}}),i);return a&&(a.call(this,l),"pending"!=l.state())?l:(r(n,{type:"POST",dataType:"json",data:{email:this.__email__,sendto:$("[data-form-sendto]").val(),product:$("[data-form-product]").val(),city:$('[name="city"]').val(),form:{title:this.__title__,data:arguments.length?e:this.__data__}}}).done(function(t){try{console.log(n),t.error?l.reject(t.error):l.resolve(t.response),window.yaCounter42617899.reachGoal("Order")}catch(t){l.reject("Incorrect server response.")}}).fail(function(){var t="Failed to query the server. ";t+="onLine"in navigator&&!navigator.onLine?"No connection to the Internet.":"Check the connection and try again.",l.reject(t)}),l)},{Form:function(t){return new o(t)}});t('[data-form-type="formoid"]').each(function(){var e,a=t(this),n=a.is("form")?a:a.find("form"),r=a.find("[data-form-alert]"),i=a.is("[data-form-title]")?a:a.find("[data-form-title]"),o=a.find('[type="submit"]'),l=r.attr("data-success")||r.find("[data-form-alert-success]").html();o.html('<span class="btn-text">'+o.html()+'</span><i class="btn-loader"></i>').click(function(){n.addClass("form-active")}),n.submit(function(d){if(d.preventDefault(),n.addClass("form-active"),!o.hasClass("btn-loading")){var c=!0,f=[];e=e||s.Form({email:a.find("[data-form-email]").val(),title:i.attr("data-form-title")||i.text()}),r.html(""),a.find("[data-form-field]").each(function(){(function(e){if(e.checkValidity)return e.checkValidity();var a=!0,n=t(e).val(),r=t(e).attr("type");return n?a=!("email"===r&&!/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(n)):t(e).attr("required")&&(a=!1),t(e)[(a?"remove":"add")+"Class"]("form-invalid"),a})(this)||(c=!1),f.push([t(this).attr("data-form-field")||t(this).attr("name"),t(this).val()])}),c&&(o.addClass("btn-loading").prop("disabled",!0),e.send(f).done(function(e){n.removeClass("form-active"),a.find("[data-form-field]").val(""),r.append(t('<div class="alert alert-form alert-success text-xs-center"/>').text(l||e))}).fail(function(e){r.append(t('<div class="alert alert-form alert-danger text-xs-center"/>').text(e))}).always(function(){o.removeClass("btn-loading").prop("disabled",!1)}))}})})});
//# sourceMappingURL=sendform.min.js.map
