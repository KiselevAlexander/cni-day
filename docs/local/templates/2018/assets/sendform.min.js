"use strict";var parseQueryString=function(t){for(var e={},a=("?"===t[0]?t.substr(1):t).split("&"),n=0;n<a.length;n++){var r=a[n].split("=");r[0]&&r[1]&&(e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||""))}return e},queryData=parseQueryString(window.location.search);queryData.utm_campaign&&localStorage.setItem("metrics",JSON.stringify(queryData)),jQuery(function(t){var e;e="sub",console.log("test 2 "+e);var a,n,r,o,i,s=(n="/local/templates/2018/sendform.php ",r=8==(a=(/MSIE (\d+)\./.exec(navigator.userAgent)||[0,0])[1])||9==a&&"file:"!=location.protocol?function(e,a){var n=new XDomainRequest,r=t.Deferred();return n.open(a.type,e),n.onload=function(){r.resolve(this.responseText)},n.onerror=function(){r.reject()},n.send(a.data),r}:(t.support.cors=!0,t.ajax),o=function(t,e){return t="__"+t+"__",e.length?(this[t]=e[0],this):this[t]},(i=function(t){t=t||{},this.__email__=t.email||"",this.__title__=t.title||"",this.__data__=t.data||[]}).prototype.email=function(t){return o.call(this,"email",arguments)},i.prototype.title=function(t){return o.call(this,"title",arguments)},i.prototype.data=function(t){return o.call(this,"data",arguments)},i.prototype.send=function(e,a){var o,i,s,l=(o=t.Deferred(),i=this,s=["email","title","data","send"],t.each(s,function(t,e){o[e]=function(){return i[e].apply(i,arguments)}}),o);return a&&(a.call(this,l),"pending"!=l.state())?l:(r(n,{type:"POST",dataType:"json",data:{sendto:$("[data-form-sendto]").val(),product:$("[data-form-product]").val(),city:$('[name="city"]').val(),name:$('[name="name"]').val(),phone:$('[name="phone"]').val(),email:$('[name="email"]').val(),text:$('[name="message"]').val(),metrics:localStorage.getItem("metrics")}}).done(function(t){try{console.log(n),t.error?l.reject(t.error):l.resolve(t.response),window.yaCounter42617899.reachGoal("Order")}catch(t){l.reject("Incorrect server response.")}}).fail(function(){var t="Failed to query the server. ";t+="onLine"in navigator&&!navigator.onLine?"No connection to the Internet.":"Check the connection and try again.",l.reject(t)}),l)},{Form:function(t){return new i(t)}});t('[data-form-type="formoid"]').each(function(){var e,a=t(this),n=a.is("form")?a:a.find("form"),r=a.find("[data-form-alert]"),o=a.is("[data-form-title]")?a:a.find("[data-form-title]"),i=a.find('[type="submit"]'),l=r.attr("data-success")||r.find("[data-form-alert-success]").html();i.html('<span class="btn-text">'+i.html()+'</span><i class="btn-loader"></i>').click(function(){n.addClass("form-active")}),n.submit(function(c){if(c.preventDefault(),n.addClass("form-active"),!i.hasClass("btn-loading")){var d=!0,f=[];e=e||s.Form({email:a.find("[data-form-email]").val(),title:o.attr("data-form-title")||o.text()}),r.html(""),a.find("[data-form-field]").each(function(){(function(e){if(e.checkValidity)return e.checkValidity();var a=!0,n=t(e).val(),r=t(e).attr("type");return n?a=!("email"===r&&!/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(n)):t(e).attr("required")&&(a=!1),t(e)[(a?"remove":"add")+"Class"]("form-invalid"),a})(this)||(d=!1),f.push([t(this).attr("data-form-field")||t(this).attr("name"),t(this).val()])}),d&&(i.addClass("btn-loading").prop("disabled",!0),e.send(f).done(function(e){n.removeClass("form-active"),a.find("[data-form-field]").val(""),r.append(t('<div class="alert alert-form alert-success text-xs-center"/>').text(l||e))}).fail(function(e){r.append(t('<div class="alert alert-form alert-danger text-xs-center"/>').text(e))}).always(function(){i.removeClass("btn-loading").prop("disabled",!1)}))}})})});
//# sourceMappingURL=sendform.min.js.map
